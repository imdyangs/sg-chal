{"ast":null,"code":"import _classCallCheck from\"/Users/imdyangs/projects/shogun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/imdyangs/projects/shogun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/imdyangs/projects/shogun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/imdyangs/projects/shogun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/Users/imdyangs/projects/shogun/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import ReactMarkdown from'react-markdown';import'./App.css';var url=\"https://api.graphql.jobs/\";var query=\"\\n  query {\\n    jobs {\\n      id\\n      title\\n      cities {\\n        name\\n        id\\n      }\\n      description\\n      company {\\n        id\\n        name\\n        websiteUrl\\n      }\\n      postedAt\\n    }\\n  }\\n\";var cleanData=function cleanData(jobs){return jobs.map(function(job){if(job.cities.length===0){job.cities[0]='NO_CITY';job.citiesString=\"Remote / No Location\";}else if(job.cities.length===1){job.cities=[job.cities[0].name];job.citiesString=job.cities[0];}else{job.cities=job.cities.map(function(city){return city.name;});job.citiesString=job.cities.join(\" • \");}job.postedAt=new Date(job.postedAt);return job;});};var sortJobsByRecentDate=function sortJobsByRecentDate(jobs){return jobs.sort(function(a,b){return b.postedAt-a.postedAt;});};var JobTab=function JobTab(_ref){var job=_ref.job,jobs=_ref.jobs;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),renderDescription=_useState2[0],setRenderDescription=_useState2[1];return/*#__PURE__*/_jsx(\"div\",{className:\"job-tab\",style:{backgroundColor:renderDescription?'rgb(131 130 140 / 10%)':null},children:/*#__PURE__*/_jsxs(\"div\",{className:\"job-vis\",onClick:function onClick(){return setRenderDescription(!renderDescription);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"job-title\",children:[job.title,\" \\u2022 \",/*#__PURE__*/_jsx(\"b\",{children:job.company.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-location\",children:[job.citiesString,\" \\u2022 \",new Intl.DateTimeFormat(\"en-US\",{year:\"numeric\",month:\"long\",day:\"2-digit\"}).format(job.postedAt)]})]}),renderDescription?/*#__PURE__*/_jsxs(\"div\",{className:\"job-description\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"job-description-title\",children:\"Description\"}),/*#__PURE__*/_jsx(ReactMarkdown,{children:job.description}),/*#__PURE__*/_jsx(\"div\",{className:\"job-contact\",children:/*#__PURE__*/_jsx(\"div\",{className:\"job-application-btn\",onClick:function onClick(){return window.open(job.company.websiteUrl);},children:\"Apply Here\"})})]}):null]})});};var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.handleChange=function(e){e.preventDefault();_this.setState({locationSearch:e.target.value},function(){if(_this.state.locationSearch===''){_this.debouncedSetDisplayedJobs(_this.state.jobs);// this.setState({ displayedJobs: this.state.jobs });\n}else{var filteredJobs=_this.state.jobs.filter(function(job){return job.citiesString.toLowerCase().includes(e.target.value);});_this.debouncedSetDisplayedJobs(filteredJobs);// this.setState({ displayedJobs: filteredJobs });\n}});};_this.state={jobs:[],displayedJobs:[],locationSearch:'',jobsLoaded:false};_this.debouncedSetDisplayedJobs=debounce(function(jobs){_this.setState({displayedJobs:jobs});},150);return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var opts={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query:query})};fetch(url,opts).then(function(res){return res.json();}).then(function(_ref2){var data=_ref2.data;var jobs=cleanData(data.jobs);jobs=sortJobsByRecentDate(jobs);_this2.setState({jobs:jobs,displayedJobs:jobs,jobsLoaded:true});}).catch(console.error);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Walmart AngelList\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-filters\",children:[\"Search jobs by city \",\" \",/*#__PURE__*/_jsx(\"input\",{className:\"job-location-search\",value:this.state.locationSearch,onChange:this.handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"open-positions\",children:\"Open Positions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"job-content\",children:this.state.displayedJobs.length!==0||this.state.jobsLoaded?this.state.displayedJobs.map(function(job){return/*#__PURE__*/_jsx(JobTab,{job:job,jobs:_this3.state.jobs},job.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})})]})});}}]);return App;}(React.Component);export default App;// Helpers\nfunction debounce(func,wait){var timeout;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var context=this;clearTimeout(timeout);timeout=setTimeout(function(){return func.apply(context,args);},wait);};}","map":{"version":3,"sources":["/Users/imdyangs/projects/shogun/src/App.js"],"names":["React","useState","ReactMarkdown","url","query","cleanData","jobs","map","job","cities","length","citiesString","name","city","join","postedAt","Date","sortJobsByRecentDate","sort","a","b","JobTab","renderDescription","setRenderDescription","backgroundColor","title","company","Intl","DateTimeFormat","year","month","day","format","description","window","open","websiteUrl","App","handleChange","e","preventDefault","setState","locationSearch","target","value","state","debouncedSetDisplayedJobs","filteredJobs","filter","toLowerCase","includes","displayedJobs","jobsLoaded","debounce","opts","method","headers","body","JSON","stringify","fetch","then","res","json","data","catch","console","error","id","Component","func","wait","timeout","args","context","clearTimeout","setTimeout","apply"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport ReactMarkdown from 'react-markdown'\nimport './App.css';\n\nconst url = \"https://api.graphql.jobs/\"\nconst query = `\n  query {\n    jobs {\n      id\n      title\n      cities {\n        name\n        id\n      }\n      description\n      company {\n        id\n        name\n        websiteUrl\n      }\n      postedAt\n    }\n  }\n`\n\nconst cleanData = jobs => {\n  return jobs.map(job => {\n    if (job.cities.length === 0) {\n      job.cities[0] = 'NO_CITY';\n      job.citiesString = \"Remote / No Location\"\n    }\n    else if (job.cities.length === 1) {\n      job.cities = [job.cities[0].name];\n      job.citiesString = job.cities[0];\n    }\n    else {\n      job.cities = job.cities.map(city => city.name)\n      job.citiesString = job.cities.join(\" • \")\n    }\n    job.postedAt = new Date(job.postedAt);\n    return job;\n  })\n}\n\nconst sortJobsByRecentDate = jobs => {\n  return jobs.sort((a, b) => {\n    return b.postedAt - a.postedAt;\n  })\n}\n\nconst JobTab = ({ job, jobs }) => {\n  const [renderDescription, setRenderDescription] = useState(false);\n  return (\n    <div className=\"job-tab\" style={{ backgroundColor: renderDescription ? 'rgb(131 130 140 / 10%)' : null }}>\n      <div className=\"job-vis\" onClick={() => setRenderDescription(!renderDescription)}>\n        <div className=\"job-header\">\n        <div className=\"job-title\">\n          {job.title} • <b>{job.company.name}</b>\n        </div>\n        <div className=\"job-location\">\n          {job.citiesString} • {new Intl.DateTimeFormat(\"en-US\", {\n            year: \"numeric\",\n            month: \"long\",\n            day: \"2-digit\"\n          }).format(job.postedAt)}\n        </div>\n      </div>\n       { renderDescription ?\n        <div className=\"job-description\">\n          <div className=\"job-description-title\">Description</div>\n          <ReactMarkdown>\n            {job.description}\n          </ReactMarkdown>\n          <div className=\"job-contact\">\n            <div className=\"job-application-btn\" onClick={() => window.open(job.company.websiteUrl)}>\n              Apply Here\n            </div>\n          </div>\n        </div> :\n        null\n       }\n    </div>\n  </div>\n)}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      jobs: [],\n      displayedJobs: [],\n      locationSearch: '',\n      jobsLoaded: false,\n    }\n    this.debouncedSetDisplayedJobs = debounce(jobs => {\n      this.setState({ displayedJobs: jobs })\n    }, 150);\n  }\n\n  componentDidMount() {\n    const opts = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ query })\n    };\n\n    fetch(url, opts)\n      .then(res => res.json())\n      .then(({ data }) => {\n        let jobs = cleanData(data.jobs);\n        jobs = sortJobsByRecentDate(jobs);\n        this.setState({ jobs, displayedJobs: jobs, jobsLoaded: true });\n      })\n      .catch(console.error);\n  }\n\n  handleChange = e => {\n    e.preventDefault();\n\n    this.setState({ locationSearch: e.target.value }, () => {\n      if (this.state.locationSearch === '') {\n        this.debouncedSetDisplayedJobs(this.state.jobs)\n        // this.setState({ displayedJobs: this.state.jobs });\n      } else {\n        const filteredJobs = this.state.jobs.filter(job => job.citiesString.toLowerCase().includes(e.target.value));\n        this.debouncedSetDisplayedJobs(filteredJobs)\n        // this.setState({ displayedJobs: filteredJobs });\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <div className=\"container\">\n          <div className=\"title\">\n            Walmart AngelList\n          </div>\n          <div className=\"job-filters\">\n            Search jobs by city {\" \"}\n            <input className=\"job-location-search\" value={this.state.locationSearch} onChange={this.handleChange} />\n          </div>\n          <div className=\"open-positions\">\n            Open Positions\n          </div>\n          <div className=\"job-content\">\n             { this.state.displayedJobs.length !== 0 || this.state.jobsLoaded ?\n              this.state.displayedJobs.map(job => <JobTab key={job.id} job={job} jobs={this.state.jobs} />) :\n              <div className=\"loader\" /> }\n          </div>\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n// Helpers\nfunction debounce(func, wait) {\n  let timeout;\n  return function(...args) {\n    const context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(context, args), wait);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}